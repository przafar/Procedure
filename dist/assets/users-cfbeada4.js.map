{"version":3,"file":"users-cfbeada4.js","sources":["../../src/data/pages/users.ts"],"sourcesContent":["import { sleep } from '../../services/utils'\nimport { User } from './../../pages/users/types'\nimport usersDb from './users-db.json'\nimport projectsDb from './projects-db.json'\nimport { Project } from '../../pages/projects/types'\n\nexport const users = usersDb as User[]\n\nconst getUserProjects = (userId: number | string) => {\n  return projectsDb\n    .filter((project) => project.team.includes(Number(userId)))\n    .map((project) => ({\n      ...project,\n      project_owner: users.find((user) => user.id === project.project_owner)!,\n      team: project.team.map((userId) => users.find((user) => user.id === userId)!),\n      status: project.status as Project['status'],\n    }))\n}\n\n// Simulate API calls\n\nexport type Pagination = {\n  page: number\n  perPage: number\n  total: number\n}\n\nexport type Sorting = {\n  sortBy: keyof User | undefined\n  sortingOrder: 'asc' | 'desc' | null\n}\n\nexport type Filters = {\n  isActive: boolean\n  search: string\n}\n\nconst getSortItem = (obj: any, sortBy: string) => {\n  if (sortBy === 'projects') {\n    return obj.projects.map((project: any) => project.project_name).join(', ')\n  }\n\n  return obj[sortBy]\n}\n\nexport const getUsers = async (filters: Partial<Filters & Pagination & Sorting>) => {\n  await sleep(1000)\n  const { isActive, search, sortBy, sortingOrder } = filters\n  let filteredUsers = users\n\n  filteredUsers = filteredUsers.filter((user) => user.active === isActive)\n\n  if (search) {\n    filteredUsers = filteredUsers.filter((user) => user.fullname.toLowerCase().includes(search.toLowerCase()))\n  }\n\n  filteredUsers = filteredUsers.map((user) => ({ ...user, projects: getUserProjects(user.id) }))\n\n  if (sortBy && sortingOrder) {\n    filteredUsers = filteredUsers.sort((a, b) => {\n      const first = getSortItem(a, sortBy)\n      const second = getSortItem(b, sortBy)\n      if (first > second) {\n        return sortingOrder === 'asc' ? 1 : -1\n      }\n      if (first < second) {\n        return sortingOrder === 'asc' ? -1 : 1\n      }\n      return 0\n    })\n  }\n\n  const { page = 1, perPage = 10 } = filters || {}\n  return {\n    data: filteredUsers.slice((page - 1) * perPage, page * perPage),\n    pagination: {\n      page,\n      perPage,\n      total: filteredUsers.length,\n    },\n  }\n}\n\nexport const addUser = async (user: User) => {\n  await sleep(1000)\n  users.unshift(user)\n}\n\nexport const updateUser = async (user: User) => {\n  await sleep(1000)\n  const index = users.findIndex((u) => u.id === user.id)\n  users[index] = user\n}\n\nexport const removeUser = async (user: User) => {\n  await sleep(1000)\n  users.splice(\n    users.findIndex((u) => u.id === user.id),\n    1,\n  )\n}\n"],"names":["users","usersDb","getUserProjects","userId","projectsDb","project","user","getSortItem","obj","sortBy","getUsers","filters","sleep","isActive","search","sortingOrder","filteredUsers","b","first","second","page","perPage","addUser","updateUser","index","u","removeUser"],"mappings":"0FAMO,MAAMA,EAAQC,EAEfC,EAAmBC,GAChBC,EACJ,OAAQC,GAAYA,EAAQ,KAAK,SAAS,OAAOF,CAAM,CAAC,CAAC,EACzD,IAAKE,IAAa,CACjB,GAAGA,EACH,cAAeL,EAAM,KAAMM,GAASA,EAAK,KAAOD,EAAQ,aAAa,EACrE,KAAMA,EAAQ,KAAK,IAAKF,GAAWH,EAAM,KAAMM,GAASA,EAAK,KAAOH,CAAM,CAAE,EAC5E,OAAQE,EAAQ,MAChB,EAAA,EAqBAE,EAAc,CAACC,EAAUC,IACzBA,IAAW,WACND,EAAI,SAAS,IAAKH,GAAiBA,EAAQ,YAAY,EAAE,KAAK,IAAI,EAGpEG,EAAIC,CAAM,EAGNC,EAAW,MAAOC,GAAqD,CAClF,MAAMC,EAAM,GAAI,EAChB,KAAM,CAAE,SAAAC,EAAU,OAAAC,EAAQ,OAAAL,EAAQ,aAAAM,GAAiBJ,EACnD,IAAIK,EAAgBhB,EAEpBgB,EAAgBA,EAAc,OAAQV,GAASA,EAAK,SAAWO,CAAQ,EAEnEC,IACFE,EAAgBA,EAAc,OAAQV,GAASA,EAAK,SAAS,YAAY,EAAE,SAASQ,EAAO,YAAY,CAAC,CAAC,GAG3GE,EAAgBA,EAAc,IAAKV,IAAU,CAAE,GAAGA,EAAM,SAAUJ,EAAgBI,EAAK,EAAE,CAAA,EAAI,EAEzFG,GAAUM,IACZC,EAAgBA,EAAc,KAAK,CAAC,EAAGC,IAAM,CACrC,MAAAC,EAAQX,EAAY,EAAGE,CAAM,EAC7BU,EAASZ,EAAYU,EAAGR,CAAM,EACpC,OAAIS,EAAQC,EACHJ,IAAiB,MAAQ,EAAI,GAElCG,EAAQC,EACHJ,IAAiB,MAAQ,GAAK,EAEhC,CAAA,CACR,GAGH,KAAM,CAAE,KAAAK,EAAO,EAAG,QAAAC,EAAU,EAAG,EAAIV,GAAW,GACvC,MAAA,CACL,KAAMK,EAAc,OAAOI,EAAO,GAAKC,EAASD,EAAOC,CAAO,EAC9D,WAAY,CACV,KAAAD,EACA,QAAAC,EACA,MAAOL,EAAc,MACvB,CAAA,CAEJ,EAEaM,EAAU,MAAOhB,GAAe,CAC3C,MAAMM,EAAM,GAAI,EAChBZ,EAAM,QAAQM,CAAI,CACpB,EAEaiB,EAAa,MAAOjB,GAAe,CAC9C,MAAMM,EAAM,GAAI,EACV,MAAAY,EAAQxB,EAAM,UAAWyB,GAAMA,EAAE,KAAOnB,EAAK,EAAE,EACrDN,EAAMwB,CAAK,EAAIlB,CACjB,EAEaoB,EAAa,MAAOpB,GAAe,CAC9C,MAAMM,EAAM,GAAI,EACVZ,EAAA,OACJA,EAAM,UAAWyB,GAAMA,EAAE,KAAOnB,EAAK,EAAE,EACvC,CAAA,CAEJ"}